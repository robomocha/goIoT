Node red World map with north America earthquakes:

[{"id":"1716c70c.e07619","type":"tab","label":"Flow 1","disabled":false,"info":""},{"id":"e33f9f53.5be488","type":"inject","z":"1716c70c.e07619","name":"","topic":"","payload":"","payloadType":"none","repeat":"","crontab":"","once":false,"x":150,"y":110,"wires":[["84518b9f.1229e8"]]},{"id":"84518b9f.1229e8","type":"function","z":"1716c70c.e07619","name":"add new layer","func":"msg.payload = {};\nmsg.payload.command = {};\n\nvar u = 'http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png';\nvar o = { maxZoom: 19, attribution: '&copy; OpenStreetMap'};\n\nmsg.payload.command.map = {name:\"OSMhot\", url:u, opt:o};\nmsg.payload.command.layer = \"OSMhot\";\n\nreturn msg;","outputs":1,"noerr":0,"x":380,"y":110,"wires":[["90258c83.cb69b"]]},{"id":"90258c83.cb69b","type":"worldmap","z":"1716c70c.e07619","name":"","lat":"54.5260","lon":"-105.2551","zoom":"","layer":"Esri Satellite","cluster":"","maxage":"","path":"","x":684,"y":177,"wires":[]},{"id":"c0e30862.d2c0e","type":"function","z":"1716c70c.e07619","name":"USGS Quake monitor csv re-parse","func":"msg.payload.lat = msg.payload.latitude;\nmsg.payload.lon = msg.payload.longitude;\nmsg.payload.layer = \"earthquake\";\nmsg.payload.name = msg.payload.id;\nmsg.payload.icon = \"globe\";\nmsg.payload.iconColor = \"orange\";\nmsg.payload.lc = msg.payload.locationSource;\n\nif(msg.payload.lc != \"us\"){\n    delete msg.payload.latitude;\n    delete msg.payload.longitude;\t\n    return msg;\n}\nelse{\n    delete msg.payload;\n}\n\n","outputs":1,"noerr":0,"x":590,"y":320,"wires":[["90258c83.cb69b","a34cb84b.a2be"]]},{"id":"eead1d29.31bbe8","type":"function","z":"1716c70c.e07619","name":"move and zoom","func":"msg.payload = { command:{layer:\"Esri Terrain\",lat:0,lon:0,zoom:3} };\nreturn msg;","outputs":1,"noerr":0,"x":380,"y":150,"wires":[["90258c83.cb69b"]]},{"id":"ff294ad5.3315a","type":"csv","z":"1716c70c.e07619","name":"","sep":",","hdrin":true,"hdrout":"","multi":"one","ret":"\\n","temp":"","skip":0,"x":351,"y":190,"wires":[["c0e30862.d2c0e"]]},{"id":"6160afaf.6ec128","type":"inject","z":"1716c70c.e07619","name":"","topic":"","payload":"","payloadType":"none","repeat":"","crontab":"","once":false,"x":150,"y":150,"wires":[["eead1d29.31bbe8"]]},{"id":"f30d4620.48c268","type":"http request","z":"1716c70c.e07619","name":"","method":"GET","ret":"txt","url":"http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_day.csv","tls":"","x":252,"y":264,"wires":[["ff294ad5.3315a"]]},{"id":"cf3b13ed.725268","type":"inject","z":"1716c70c.e07619","name":"Quakes","topic":"","payload":"","payloadType":"none","repeat":"900","crontab":"","once":false,"x":160,"y":190,"wires":[["f30d4620.48c268"]]},{"id":"a34cb84b.a2be","type":"debug","z":"1716c70c.e07619","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":759.5,"y":474,"wires":[]}]
